      - name: Deploy via FTP
        uses: SamKirkland/FTP-Deploy-Action@v4.3.4
        with:
          server: ${{ secrets.FTP_SERVER }}
          username: ${{ secrets.FTP_USERNAME }}
          password: ${{ secrets.FTP_PASSWORD }}

          # Verbindungs-Settings
          protocol: ftps              # explizites FTPS
          port: 21
          security: controlOnly       # <<< FIX: TLS nur auf Control-Channel (verhindert data-socket-Resets)
          passive: true               # (Standard, hier explizit)

          # Laufzeit
          timeout: 120000             # 120s, hilft bei trÃ¤gen Servern
          max-tries: 3
          log-level: verbose

          # Deploy-Ziel
          local-dir: dist/            # Slash am Ende
          server-dir: ${{ secrets.FTP_REMOTE_DIR }}  # z. B. "/ai-smartbiz/" (mit Slash am Ende!)

          # sicher deployen
          dangerous-clean-slate: false
          exclude: |
            **/.git*
            **/.github/**
            **/node_modules/**
            **/src/**
            **/package*.json
            **/vite.config.*
          state-name: .ftp-deploy-sync-state.json   # inkrementelles Sync, weniger Datenkanal-Last
